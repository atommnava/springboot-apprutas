# Aplicación Spring Boot: Optimización de Rutas con Dijkstra

Este proyecto demuestra cómo el **Algoritmo de Dijkstra** puede optimizar rutas para reducir distancia, tiempo y consumo de combustible, contribuyendo a disminuir la quema de combustibles fósiles.

---

## 1. Estructura del proyecto

```
src/main/java/com/example/rutas
│── RutasApplication.java
│── controller/
│   └── RutaController.java
│── service/
│   └── DijkstraService.java
│── model/
│   └── Graph.java
│
src/main/resources/templates
│── index.html
│── resultado.html
│
src/main/resources/static/css
│── styles.css
```

---

## 2. RestController (RutaController.java)

```java
package com.example.rutas.controller;

import com.example.rutas.service.DijkstraService;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;

@Controller
public class RutaController {

    private final DijkstraService dijkstraService;

    public RutaController(DijkstraService dijkstraService) {
        this.dijkstraService = dijkstraService;
    }

    @GetMapping("/")
    public String index() {
        return "index";
    }

    @PostMapping("/calcular")
    public String calcularRuta(
            @RequestParam String origen,
            @RequestParam String destino,
            Model model) {

        var resultado = dijkstraService.calcularRuta(origen, destino);

        model.addAttribute("ruta", resultado.getRuta());
        model.addAttribute("distancia", resultado.getDistancia());
        model.addAttribute("combustible", resultado.getCombustibleAhorrado());

        return "resultado";
    }
}
```

---

## 3. Servicio Dijkstra (DijkstraService.java)

```java
package com.example.rutas.service;

import org.springframework.stereotype.Service;
import java.util.*;

@Service
public class DijkstraService {

    public ResultadoRuta calcularRuta(String origen, String destino) {
        // Grafo simple de ejemplo
        Map<String, Map<String, Integer>> grafo = new HashMap<>();

        grafo.put("A", Map.of("B", 5, "C", 10));
        grafo.put("B", Map.of("A", 5, "C", 3, "D", 7));
        grafo.put("C", Map.of("A", 10, "B", 3, "D", 1));
        grafo.put("D", Map.of("B", 7, "C", 1));

        Map<String, Integer> distancias = new HashMap<>();
        Map<String, String> previo = new HashMap<>();
        PriorityQueue<String> cola = new PriorityQueue<>(Comparator.comparingInt(distancias::get));

        for (String nodo : grafo.keySet()) {
            distancias.put(nodo, Integer.MAX_VALUE);
        }
        distancias.put(origen, 0);
        cola.add(origen);

        while (!cola.isEmpty()) {
            String actual = cola.poll();
            for (var vecino : grafo.get(actual).entrySet()) {
                int nuevaDist = distancias.get(actual) + vecino.getValue();
                if (nuevaDist < distancias.get(vecino.getKey())) {
                    distancias.put(vecino.getKey(), nuevaDist);
                    previo.put(vecino.getKey(), actual);
                    cola.add(vecino.getKey());
                }
            }
        }

        // Reconstrucción de ruta
        List<String> ruta = new ArrayList<>();
        for (String at = destino; at != null; at = previo.get(at)) {
            ruta.add(at);
        }
        Collections.reverse(ruta);

        int distancia = distancias.get(destino);
        double combustibleAhorrado = distancia * 0.05; // Ejemplo

        return new ResultadoRuta(ruta, distancia, combustibleAhorrado);
    }

    public static class ResultadoRuta {
        private final List<String> ruta;
        private final int distancia;
        private final double combustibleAhorrado;

        public ResultadoRuta(List<String> ruta, int distancia, double combustibleAhorrado) {
            this.ruta = ruta;
            this.distancia = distancia;
            this.combustibleAhorrado = combustibleAhorrado;
        }

        public List<String> getRuta() { return ruta; }
        public int getDistancia() { return distancia; }
        public double getCombustibleAhorrado() { return combustibleAhorrado; }
    }
}
```

---

## 4. Vista principal (index.html)

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Optimización de Rutas</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="container">
    <h1>Optimización de Rutas con Dijkstra</h1>
    <p>Reduce consumo de combustible y emisiones contaminantes.</p>

    <form action="/calcular" method="post">
        <label>Origen:</label>
        <input type="text" name="origen" placeholder="A" required>

        <label>Destino:</label>
        <input type="text" name="destino" placeholder="D" required>

        <button type="submit">Calcular Ruta Óptima</button>
    </form>
</div>
</body>
</html>
```

---

## 5. Vista de resultados (resultado.html)

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Resultado</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
<div class="container">
    <h2>Ruta Óptima Calculada</h2>

    <p><strong>Ruta:</strong> <span th:text="${ruta}"></span></p>
    <p><strong>Distancia Total:</strong> <span th:text="${distancia}"></span> km</p>
    <p><strong>Combustible Ahorrado:</strong> <span th:text="${combustible}"></span> L</p>

    <a href="/">Calcular otra ruta</a>
</div>
</body>
</html>
```

---

## 6. Estilos CSS (styles.css)

```css
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    color: #fff;
}

.container {
    width: 400px;
    margin: 80px auto;
    background: #1e272e;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0,0,0,0.4);
}

h1, h2 {
    text-align: center;
}

label {
    display: block;
    margin-top: 15px;
}

input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
}

button {
    margin-top: 20px;
    width: 100%;
    padding: 10px;
    background: #2ecc71;
    border: none;
    font-size: 16px;
    cursor: pointer;
}

button:hover {
    background: #27ae60;
}

a {
    color: #2ecc71;
    text-decoration: none;
}
```

---

## 7. Resultado final

La aplicación muestra visualmente cómo **Dijkstra** encuentra la ruta más corta entre dos puntos, reflejando:

* Menor distancia recorrida
* Ahorro estimado de combustible
* Impacto positivo en el medio ambiente

Ideal para proyectos académicos de **optimización, sostenibilidad y sistemas inteligentes**.
